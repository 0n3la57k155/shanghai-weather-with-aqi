
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<script>var url=window.location.href;url.indexOf("https")<0&&(url=url.replace("http:","https:"),window.location.replace(url));</script>
<meta name="theme-color" content="#000000">
<title>Shanghai</title>
<meta name="description" content="Shanghai Weather and AQI" />
<meta name="author" content="" />
<link rel="preload stylesheet" as="style" href="https://via.moe/app.min.css" />
<link rel="preload" as="image" href="https://via.moe/theme.png" />
<link rel="preload" as="image" href="https://via.moe/twitter.svg" />
<link rel="preload" as="image" href="https://via.moe/github.svg" />
<link rel="preload" as="image" href="https://via.moe/instagram.svg" />
<link rel="icon" href="https://via.moe/favicon.ico" />
<link rel="apple-touch-icon" href="https://via.moe/apple-touch-icon.png" />
<meta name="generator" content="Hugo 0.87.0" />
<link rel="alternate" type="application/rss&#43;xml" href="https://via.moe/index.xml" title="Siege" />
<meta property="og:title" content="" />
<meta property="og:description" content="Shanghai Weather and AQI" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://via.moe/" />
<meta itemprop="name" content="">
<meta itemprop="description" content="Shanghai Weather and AQI">
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="" />
<meta name="twitter:description" content="Shanghai Weather and AQI" />
</head>
<body class="not-ready" data-menu="true">
<header class="header">
<h1 class="logo">
<a class="site-name" href="https://via.moe/">Siege</a><a class="btn-dark"></a>
</h1>
<script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>
<nav class="menu">
<a class="active" href="/">Index</a>
<a class="" target="_blank" href="https://sh.via.moe/weather/">Weather</a>
<a class="" target="_blank" href="https://www.hko.gov.hk/en/wxinfo/currwx/tc_gis.htm">Cyclone</a>
<a class="" target="_blank" href="https://via.moe/">Blog</a>
<a class="" target="_blank" href="https://via.moe/about">About</a>

</nav>
<nav class="social">
<a class="twitter" style="--url: url(./twitter.svg)" href="https://twitter.com/h0wardch3ng" target="_blank"></a>
<a class="github" style="--url: url(./github.svg)" href="https://github.com/h0wardch3ng" target="_blank"></a>
<a class="instagram" style="--url: url(./instagram.svg)" href="https://instagram.com/h0wardch3ng" target="_blank"></a>
</nav>
</header>
<main class="main">
  <center><div name="airvisual_widget" key="6133154ea6ccaf1a234e0315"></div>
  <script type="text/javascript" src="http://cdn.airvisual.net/assets/widgets/widget_v3.0.js"></script></center>
  <br><br>
  <center>
    <div id='map' style='height:600px;' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
                                /*var OSM_URL='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';*/
                                var OSM_URL =
                                    'https://api.mapbox.com/styles/v1/h0wardch3ng/ck2swvlx11m1p1cnzexncaafg/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaDB3YXJkY2gzbmciLCJhIjoiY2syc3Zod2x5MTRyZTNvcXY3dTQ2NHFkZSJ9.eChSWdg1CZBnQCwQi3xz0Q';
                                var OSM_ATTRIB = '&copy; <a href="https://mapbox.com">Mapbox</a>';
                                var osmLayer = L.tileLayer(OSM_URL, {
                                    attribution: OSM_ATTRIB
                                });
                                var WAQI_URL =
                                    "https://tiles.waqi.info/tiles/usepa-aqi/{z}/{x}/{y}.png?token=58b30683788435847eb8c478ee3dcf092ee5c1c0";
                                var WAQI_ATTR = '<a href="https://aqicn.org">AQICN</a>';
                                var waqiLayer = L.tileLayer(WAQI_URL, {
                                    attribution: WAQI_ATTR
                                });
                                var map = L.map('map').setView([31.2359385, 121.5088746], 9);
                                map.addLayer(osmLayer).addLayer(waqiLayer);
                            </script>
    </div>
    </center>
</main>
<footer class="footer">
<center><span id="localutc"></span> <span id="LAX"></span> <span id="PVG"></span> <span id="JFK"></span> </div><br>Opensource on <a href=https://github.com/h0wardch3ng/shanghai-weather-with-aqi>Github </a> </div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script language="javascript" type="text/javascript">
                                        function calcTime(x, w) {
                                            var s = new Date();
                                            utc = s.getTime() + (s.getTimezoneOffset() * 60000);
                                            var v = new Date(utc + (3600000 * w));
                                            var d = new Date(utc);
                                            var p = v.getDate();
                                            var t = v.getMonth();
                                            var r = v.getYear();
                                            var o = v.getHours();
                                            var y = v.getMinutes();
                                            var u = v.getSeconds();
                                            if (r < 1000) {
                                                r += 1900
                                            }
                                            var z = new Array("January", "February", "March", "April", "May", "June",
                                                "July", "August", "September", "October", "November", "December");
                                            var q = new Array("31", "28", "31", "30", "31", "30", "31", "31", "30",
                                                "31", "30", "31");
                                            if (r % 4 == 0) {
                                                q = new Array("31", "29", "31", "30", "31", "30", "31", "31", "30",
                                                    "31", "30", "31")
                                            }
                                            if (r % 100 == 0 && r % 400 != 0) {
                                                q = new Array("31", "28", "31", "30", "31", "30", "31", "31", "30",
                                                    "31", "30", "31")
                                            }
                                            if (o >= 24) {
                                                o = o - 24;
                                                p -= -1
                                            }
                                            if (o < 0) {
                                                o -= -24;
                                                p -= 1
                                            }
                                            if (o < 10) {
                                                o = " " + o
                                            }
                                            if (y < 10) {
                                                y = "0" + y
                                            }
                                            if (u < 10) {
                                                u = "0" + u
                                            }
                                            if (p <= 0) {
                                                if (t == 0) {
                                                    t = 11;
                                                    r -= 1
                                                } else {
                                                    t = t - 1
                                                }
                                                p = q[t]
                                            }
                                            if (p > q[t]) {
                                                p = 1;
                                                if (t == 11) {
                                                    t = 0;
                                                    r -= -1
                                                } else {
                                                    t -= -1
                                                }
                                            }
                                            return x + o + ":" + y
                                        }

                                        function worldClockZone() {
                                            document.getElementById("localutc").innerHTML = calcTime("LHR ", "+1");
                                            document.getElementById("LAX").innerHTML = calcTime("LAX ", "-7");
                                            document.getElementById("PVG").innerHTML = calcTime("PVG ", "+8");
                                            document.getElementById("JFK").innerHTML = calcTime("JFK ", "-4");
                                            setTimeout("worldClockZone()", 1000)
                                        }
                                        window.onload = worldClockZone;
                                    </script></center>
</footer>
</body>
</html>